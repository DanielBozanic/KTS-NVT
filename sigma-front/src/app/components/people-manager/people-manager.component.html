<!DOCTYPE html>
<div>
  <div class="add-button">
    <button (click)="openDialog()" mat-raised-button color="primary">
      Add
    </button>
  </div>
  <div>
    <mat-card class="table-card">
      <div class="data-table">
        <table mat-table [dataSource]="employeeDataSource">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef class="column-name">Name</th>
            <td mat-cell *matCellDef="let element" class="column-name">
              {{ element.name }}
            </td>
          </ng-container>
          <ng-container matColumnDef="paymentBigDecimal">
            <th mat-header-cell *matHeaderCellDef class="column-payment">
              Payment
            </th>
            <td mat-cell *matCellDef="let element" class="column-payment">
              {{ element.paymentBigDecimal }}
            </td>
          </ng-container>
          <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef class="column-job">Job</th>
            <td mat-cell *matCellDef="let element" class="column-job">
              {{ element.type }}
            </td>
          </ng-container>
          <ng-container matColumnDef="code">
            <th mat-header-cell *matHeaderCellDef class="column-code">Code</th>
            <td mat-cell *matCellDef="let element" class="column-code">
              {{ element.code }}
            </td>
          </ng-container>
          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef class="column-edit-button">
              Edit
            </th>
            <td mat-cell *matCellDef="let element" class="column-edit-button">
              <button
                (click)="editEmployee(element)"
                mat-raised-button
                color="primary"
              >
                Edit
              </button>
            </td>
          </ng-container>
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef class="column-delete-button">
              Delete
            </th>
            <td mat-cell *matCellDef="let element" class="column-delete-button">
              <button
                (click)="deleteEmployee(element.id)"
                mat-raised-button
                color="warn"
              >
                Delete
              </button>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsPeople"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsPeople"
          ></tr>
        </table>
        <mat-paginator
          [pageSizeOptions]="[5]"
          showFirstLastButtons
        ></mat-paginator>
      </div>
    </mat-card>
  </div>
  <ng-template #addEmployeeDialog>
    <form [formGroup]="addEmployeeForm" class="add-employee-form">
      <mat-form-field class="field-width">
        <mat-label>Name</mat-label>
        <input type="text" matInput placeholder="Name" formControlName="name" />
        <mat-error *ngIf="hasError('name', 'required')"
          >Name is required!</mat-error
        >
      </mat-form-field>
      <mat-form-field class="field-width">
        <mat-label>Payment</mat-label>
        <input
          type="number"
          min="0"
          matInput
          placeholder="Payment"
          formControlName="paymentBigDecimal"
          (input)="checkPayment()"
        />
        <mat-error *ngIf="hasError('paymentBigDecimal', 'required')"
          >Payment is required!</mat-error
        >
        <mat-error
          *ngIf="
            paymentBigDecimal?.invalid &&
            !hasError('paymentBigDecimal', 'required')
          "
          >Price must be a postive number!</mat-error
        >
      </mat-form-field>
      <mat-form-field class="field-width">
        <mat-label>Job</mat-label>
        <mat-select formControlName="type">
          <mat-option *ngFor="let job of jobs" [value]="job">{{
            job
          }}</mat-option>
        </mat-select>
      </mat-form-field>
    </form>
    <button
      (click)="addEmployee()"
      [disabled]="addEmployeeForm.invalid"
      mat-raised-button
      color="primary"
    >
      Add new worker
    </button>
  </ng-template>
</div>
